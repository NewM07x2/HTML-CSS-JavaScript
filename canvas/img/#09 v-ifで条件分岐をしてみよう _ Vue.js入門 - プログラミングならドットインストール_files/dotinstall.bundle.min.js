var Dotinstall=function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var i=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(e){i[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,a,s=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),c=1;c<arguments.length;c++){for(var u in n=Object(arguments[c]))o.call(n,u)&&(s[u]=n[u]);if(i){a=i(n);for(var d=0;d<a.length;d++)r.call(n,a[d])&&(s[a[d]]=n[a[d]])}}return s}},function(e,t,n){"use strict";var i={TAB:9,ENTER:13,ESCAPE:27,SPACE:32,ARROW_UP:38,ARROW_DOWN:40,SLASH:{PRESS:47},INPUT_JAPANESE:229};e.exports=i},function(e,t,n){"use strict";var i=function(){var e,t,n,i,o,r,a,s,c,u,d,l,f,h=!1,p={north:!1,south:!1};function m(){h=!1,u.hide(),$("body").removeClass("disable-select"),f(e-t)}function v(){o.offset({top:r.offset().top+r.outerHeight(),left:r.offset().left}),o.width(s.width())}function _(e){return 1*e.css("min-height").replace(/px$/,"")}return{apply:function(g,y,b,w,x,k,E,C){o=g,r=y,a=b,s=w,c=x,d=k||function(){},l=E||function(){},f=C||function(){},p.north=_(r),p.south=_(a),o.on("mousedown",function(t){!function(t){h=!0,e=t.pageY,n=r.outerHeight(),i=a.outerHeight(),u.show(),$("body").addClass("disable-select"),d()}(t)}).on("mouseup",function(){m()}),v(),(u=$("<div>")).attr("id","resize_mask_v").addClass("resize-mask").appendTo("body"),u.on("mouseup",function(){m()}),$(document).on("mousemove",function(o){!0===h&&(t=o.pageY,function(){var o=e-t;n-o<p.north?(r.outerHeight(p.north),a.outerHeight(c.height()-p.north)):i+o<p.south?(r.outerHeight(c.height()-p.south),a.outerHeight(p.south)):(r.outerHeight(n-o),a.outerHeight(i+o)),a.offset({top:r.offset().top+r.outerHeight(),left:a.offset().left}),v(),l()}())}),$(window).on("resize",function(){v()})},setHandlerOffset:v}}();e.exports=i},function(e,t,n){"use strict";var i=n(0),o=n(4),r=n(5),a=n(9),s=n(10),c=n(11),u=n(12),d=n(13),l=n(17),f=n(24),h=n(1),p=n(25),m=n(26),v=n(28),_=n(29),g=n(30),y=n(32),$=n(33),b=n(34),w=n(35),x=n(37),k=n(38),E=n(39),C=n(42),T=n(48),S=n(49),H=n(53),O=n(55),M=n(56),j=n(57),A={assign:i,cookie:f,editor:C,event:o,exercise:$,fileUpload:r,form:d,forum:x,ga:a,guestUser:O,hotKey:M,keyCode:h,layout:_,like:k,location:b,navigator:s,overlaySidebar:y,payment:{callbacks:E.callbacks},player:{alert:S.alert},preview:c,progressBar:j,resize:m,responsive:l,sizes:v,tab:{scroll:H.scroll},terminal:T,textDetection:w,uiGuide:g,util:p,videoController:u};if(void 0===L)var L=A;else L=i(L,A);e.exports=L},function(e,t,n){"use strict";var i=function(){return{cancel:function(e){return e.preventDefault(),e.stopPropagation(),!1}}}();e.exports=i},function(e,t,n){"use strict";var i=function(){var e,t="これは画像を表示するためのタグです",i=n(6).Promise,o=[],r=[],a=!1,s=!0,c=!1,u={};function d(e,t,n){var i,r;i=u.generateFileKey(e),void 0!==n.create_element&&(r=n.create_element(i,e.name)),l(e,t,r,n).then(n.success,n.error),o[i]=!0}function l(e,t,n,o){return t=[t,"name="+encodeURIComponent(e.name),"type="+encodeURIComponent(e.type)].join("&"),new i(function(i,r){var a=null,s=new FileReader;function c(){if(a){var s=new XMLHttpRequest;s.addEventListener("load",function(t){200!==s.status?413===s.status?r({el:n,error_message:"ファイルサイズが大きすぎます。"}):r({el:n,error_message:$.parseJSON(s.responseText).error.message}):i({el:n,response:$.parseJSON(s.responseText),file:e})}),s.addEventListener("error",function(){r({el:n,error_message:"Network error"})}),s.open("POST",t),s.send(a),o.start&&o.start()}else setTimeout(c,10)}s.addEventListener("loadend",function(){a=s.result,c()}),s.readAsArrayBuffer(e)})}function f(e,t){var n=$('<input type="hidden" name="file_id[]">').attr("id","file_id_"+t.file_id).data("file-id",t.file_id).val(t.file_id),i=$('<input type="hidden">').attr("id","file_name_"+t.file_id).attr("name","file_name_"+t.file_id).data("file-id",t.file_id).val(t.file_name),o=$('<input type="hidden">').attr("id","mime_type_"+t.file_id).attr("name","mime_type_"+t.file_id).data("file-id",t.file_id).val(t.mime_type);r.push(n),r.push(i),r.push(o),$(e).append(n).append(i).append(o)}function h(e){$(e).wrap('<form style="display:inline;">').closest("form").get(0).reset(),$(e).unwrap()}return u.uploadFilesByDataTransfer=function(e,t,n){var i;for(i=0;i<e.files.length;i++)d(e.files[i],t,n)},u.generateFileKey=function(e){return e.size+"_"+e.name},{addHiddenField:f,afterRemove:function(e){var t,n;for(t=0;t<r.length;t++)r[t].data("file-id")-0==e-0&&(r[t].remove(),r.splice(t,1),t--);n=$("#question_file_"+e).data("file-key"),o[n]=void 0},alwaysEmbed:function(e){a=e},clearAppendedHiddenFields:function(){var e;for(e=0;e<r.length;e++)r[e].remove();r=[]},enableDragAndDrop:function(t,n,i){t.on("dragenter",function(e){Dotinstall.event.cancel(e)}).on("dragenter",function(){$(this).addClass("over")}).on("dragleave",function(){$(this).removeClass("over")}).on("dragover",function(e){Dotinstall.event.cancel(e)}).on("drop",function(t){return e=$(this),u.uploadFilesByDataTransfer(t.originalEvent.dataTransfer,n,i),$(this).removeClass("over"),Dotinstall.event.cancel(t),!1})},exec:l,getTargetElement:function(){return e},insertMarkdownGuideMessage:function(e){s=e},manage:d,setTargetElement:function(t){e=t instanceof jQuery?t:$(t)},useFilePermalink:function(e){c=e},whenUploadSuccess:function(e,n,i){e.response.is_image_file?function(e,n,i){var o,r,a;a=c?e.response.file_permalink:e.response.file_id,o=s?"("+a+":"+t+")":"("+a+")",r="!["+e.file.name.replace(/[\[\]]/g,"")+"]"+o,Dotinstall.form.insertAtCaret($(n.textarea_id),r),void 0!==e.el&&e.el.hide(),void 0!==i&&i()}(e,n,i.image):a?function(e,t,n){var i=["["+e.file.name.replace(/\[\]/,"")+"]","("+e.response.file_permalink+")"].join("");Dotinstall.form.insertAtCaret($(t.textarea_id),i),void 0!==e.el&&e.el.hide(),void 0!==n&&n()}(e,n,i.text):function(e){!function(e){e.el.attr("id","question_file_"+e.response.file_id).removeClass("uploading").addClass("success"),e.response.is_image_file?e.el.find("i:first").removeClass("fa-file").addClass("fa-file-image-o"):e.el.find("i:first").removeClass("fa-file").addClass("fa-file-text-o"),e.el.find("i.fa-times").data("file-id",e.response.file_id)}(e)}(e),f(n.form_id,{file_id:e.response.file_id,file_name:e.file.name,mime_type:e.file.type}),h(n.input_file_id)},whenUploadError:function(e){e.el.addClass("error"),$("<li>").text(e.el.text()+"はアップロードできませんでした。（"+e.error_message+"）").appendTo("#upload_errors"),$("#upload_errors").fadeIn(),h("#select_upload_file")}}}();e.exports=i},function(e,t,n){(function(t,n){
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.4+314e4831
 */
!function(t,n){e.exports=n()}(0,function(){"use strict";function e(e){return"function"==typeof e}var i=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},o=0,r=void 0,a=void 0,s=function(e,t){p[o]=e,p[o+1]=t,2===(o+=2)&&(a?a(m):v())};var c="undefined"!=typeof window?window:void 0,u=c||{},d=u.MutationObserver||u.WebKitMutationObserver,l="undefined"==typeof self&&void 0!==t&&"[object process]"==={}.toString.call(t),f="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function h(){var e=setTimeout;return function(){return e(m,1)}}var p=new Array(1e3);function m(){for(var e=0;e<o;e+=2){(0,p[e])(p[e+1]),p[e]=void 0,p[e+1]=void 0}o=0}var v=void 0;function _(e,t){var n=this,i=new this.constructor($);void 0===i[y]&&D(i);var o=n._state;if(o){var r=arguments[o-1];s(function(){return A(o,i,r,n._result)})}else M(n,i,e,t);return i}function g(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this($);return T(t,e),t}v=l?function(){return t.nextTick(m)}:d?function(){var e=0,t=new d(m),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}():f?function(){var e=new MessageChannel;return e.port1.onmessage=m,function(){return e.port2.postMessage(0)}}():void 0===c?function(){try{var e=Function("return this")().require("vertx");return void 0!==(r=e.runOnLoop||e.runOnContext)?function(){r(m)}:h()}catch(e){return h()}}():h();var y=Math.random().toString(36).substring(2);function $(){}var b=void 0,w=1,x=2,k={error:null};function E(e){try{return e.then}catch(e){return k.error=e,k}}function C(t,n,i){n.constructor===t.constructor&&i===_&&n.constructor.resolve===g?function(e,t){t._state===w?H(e,t._result):t._state===x?O(e,t._result):M(t,void 0,function(t){return T(e,t)},function(t){return O(e,t)})}(t,n):i===k?(O(t,k.error),k.error=null):void 0===i?H(t,n):e(i)?function(e,t,n){s(function(e){var i=!1,o=function(e,t,n,i){try{e.call(t,n,i)}catch(e){return e}}(n,t,function(n){i||(i=!0,t!==n?T(e,n):H(e,n))},function(t){i||(i=!0,O(e,t))},e._label);!i&&o&&(i=!0,O(e,o))},e)}(t,n,i):H(t,n)}function T(e,t){e===t?O(e,new TypeError("You cannot resolve a promise with itself")):!function(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}(t)?H(e,t):C(e,t,E(t))}function S(e){e._onerror&&e._onerror(e._result),j(e)}function H(e,t){e._state===b&&(e._result=t,e._state=w,0!==e._subscribers.length&&s(j,e))}function O(e,t){e._state===b&&(e._state=x,e._result=t,s(S,e))}function M(e,t,n,i){var o=e._subscribers,r=o.length;e._onerror=null,o[r]=t,o[r+w]=n,o[r+x]=i,0===r&&e._state&&s(j,e)}function j(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var i=void 0,o=void 0,r=e._result,a=0;a<t.length;a+=3)i=t[a],o=t[a+n],i?A(n,i,o,r):o(r);e._subscribers.length=0}}function A(t,n,i,o){var r=e(i),a=void 0,s=void 0,c=void 0,u=void 0;if(r){if((a=function(e,t){try{return e(t)}catch(e){return k.error=e,k}}(i,o))===k?(u=!0,s=a.error,a.error=null):c=!0,n===a)return void O(n,new TypeError("A promises callback cannot return that same promise."))}else a=o,c=!0;n._state!==b||(r&&c?T(n,a):u?O(n,s):t===w?H(n,a):t===x&&O(n,a))}var L=0;function D(e){e[y]=L++,e._state=void 0,e._result=void 0,e._subscribers=[]}var I=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e($),this.promise[y]||D(this.promise),i(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?H(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&H(this.promise,this._result))):O(this.promise,new Error("Array Methods must be provided an Array"))}return e.prototype._enumerate=function(e){for(var t=0;this._state===b&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,i=n.resolve;if(i===g){var o=E(e);if(o===_&&e._state!==b)this._settledAt(e._state,t,e._result);else if("function"!=typeof o)this._remaining--,this._result[t]=e;else if(n===P){var r=new n($);C(r,e,o),this._willSettleAt(r,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(i(e),t)},e.prototype._settledAt=function(e,t,n){var i=this.promise;i._state===b&&(this._remaining--,e===x?O(i,n):this._result[t]=n),0===this._remaining&&H(i,this._result)},e.prototype._willSettleAt=function(e,t){var n=this;M(e,void 0,function(e){return n._settledAt(w,t,e)},function(e){return n._settledAt(x,t,e)})},e}();var P=function(){function e(t){this[y]=L++,this._result=this._state=void 0,this._subscribers=[],$!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof e?function(e,t){try{t(function(t){T(e,t)},function(t){O(e,t)})}catch(t){O(e,t)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return e.prototype.catch=function(e){return this.then(null,e)},e.prototype.finally=function(e){var t=this.constructor;return this.then(function(n){return t.resolve(e()).then(function(){return n})},function(n){return t.resolve(e()).then(function(){throw n})})},e}();return P.prototype.then=_,P.all=function(e){return new I(this,e).promise},P.race=function(e){var t=this;return i(e)?new t(function(n,i){for(var o=e.length,r=0;r<o;r++)t.resolve(e[r]).then(n,i)}):new t(function(e,t){return t(new TypeError("You must pass an array to race."))})},P.resolve=g,P.reject=function(e){var t=new this($);return O(t,e),t},P._setScheduler=function(e){a=e},P._setAsap=function(e){s=e},P._asap=s,P.polyfill=function(){var e=void 0;if(void 0!==n)e=n;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var i=null;try{i=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===i&&!t.cast)return}e.Promise=P},P.Promise=P,P})}).call(this,n(7),n(8))},function(e,t){var n,i,o=e.exports={};function r(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===r||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:r}catch(e){n=r}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(e){i=a}}();var c,u=[],d=!1,l=-1;function f(){d&&c&&(d=!1,c.length?u=c.concat(u):l=-1,u.length&&h())}function h(){if(!d){var e=s(f);d=!0;for(var t=u.length;t;){for(c=u,u=[];++l<t;)c&&c[l].run();l=-1,t=u.length}c=null,d=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new p(e,t)),1!==u.length||d||s(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";var i=function(){return{tracking:function(e,t,n){if("undefined"==typeof ga)return!1;4===arguments.length?ga("send","event",e,t,n,arguments[3]):5===arguments.length?ga("send","event",e,t,n,arguments[3],arguments[4]):ga("send","event",e,t,n)}}}();e.exports=i},function(e,t,n){"use strict";var i=function(){var e,t,n,i,o,r,a,s,c,u,d,l=function(e){return null!==navigator.userAgent.match(e)};function f(e){var t;return null===(t=e.exec(navigator.userAgent))?null:t[1]}return{detect:function(){return e=l(/^Mozilla.+(iPhone|iPod|iPhone Simulator);.+iPhone OS.+AppleWebKit/)||l(/Android.+Mobile/),t=l(/iPad;.+ OS.+AppleWebKit/)||l(/Android/)&&navigator.userAgent.indexOf("Mobile")<0,n=l(/Android.+Chrome/),i=l(/^Mozilla\/.+AppleWebKit\/.+Chrome\/.+Safari.+$/),o=l(/Firefox/),r=l(/AppleWebKit.+Safari/)&&!i,a=l(/ OPR\/[0-9]/),l(/MSIE/)?(s=!0,d=f(/MSIE ([\d\.]+)/)):l(/Trident/)&&(s=!0,"11.0"!==(d=f(/rv:([\d\.]+)/))&&(d=null)),c=l(/MSIE 8\.0/),u=l(/^Mozilla\/[\d\.]+ \(Windows NT 6\.3(; WOW\d+)?\) AppleWebKit\/[\d\.]+ \(KHTML, like Gecko\) Chrome\/[\d\.]+ Safari\/[\d\.]+$/),{isSmartphone:e,isTablet:t,isAndroidChrome:n,isChrome:i,isFirefox:o,isSafari:r,isOpera:a,isIE:s,isIE8:c,isWin81Chrome:u,isAvailableFlash:function(){if(navigator.mimeTypes["application/x-shockwave-flash"]&&navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)return!0;try{return new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),!0}catch(e){return!1}return!1},ieVersion:d}}}}();e.exports=i},function(e,t,n){"use strict";var i=function(){return{set:function(e,t){$.post("/preview/set.json",{}).done(function(t){e(t.url)}).fail(function(){t()})}}}();e.exports=i},function(e,t,n){"use strict";var i=function(){function e(e){HMHM.movie.vimeo.player.seekTo(HMHM.movie.vimeo.player.getCurrentTime()+e)||HMHM.movie.videojs.player.seekTo(HMHM.movie.videojs.player.getCurrentTime()+e)}return{playOrPause:function(){var e;void 0!==HMHM.movie.vimeo.player.getPlayerState()?e=HMHM.movie.vimeo.player.getPlayerState():void 0!==HMHM.movie.videojs.player.getPlayerState()&&(e=HMHM.movie.videojs.player.getPlayerState()),1===e?HMHM.movie.vimeo.player.pauseVideo()||HMHM.movie.videojs.player.pauseVideo():HMHM.movie.vimeo.player.playVideo()||HMHM.movie.videojs.player.playVideo()},forwardTo:e,rewindTo:function(t){e(-1*t)}}}();e.exports=i},function(e,t,n){"use strict";var i=n(14),o=n(15),r=n(16),a=function(){return{focusByKey:function(e,t,n){if(e.which!==t)return!1;var i=e.target||e.srcElement;(1!==i.nodeType||"TEXTAREA"!==i.nodeName&&"INPUT"!==i.nodeName)&&(e.preventDefault(),n.focus(),n.select())},inputTabChar:function(e,t){var n,i,o;if(9===t.keyCode)return void 0!==t.preventDefault&&t.preventDefault(),i=e.get(0).selectionStart,o=e.get(0).selectionEnd,n=e.val(),e.val(n.substr(0,i)+"\t"+n.substr(o)),e.get(0).selectionStart=i+1,e.get(0).selectionEnd=i+1,!1},insertAtCaret:function(e,t){var n,i,o,r,a=!0;void 0!==arguments[2]&&!1===arguments[2]&&(a=!1),n=e.get(0).selectionStart,i=e.get(0).selectionEnd,r=""+(o=e.val()).substr(0,n),a&&(r+="\n"),r+=t+o.substr(i),e.val(r),e.get(0).selectionStart=n+t.length+1,e.get(0).selectionEnd=n+t.length+1},clickToMention:o,quote:i,suggester:r}}();e.exports=a},function(e,t,n){"use strict";var i=function(){return{execute:function(e,t){var n,i,o,r="";if(e.which==="r".charCodeAt(0)&&!e.metaKey&&!e.ctrlKey&&(1!==(o=e.target||e.srcElement).nodeType||"TEXTAREA"!==o.nodeName&&"INPUT"!==o.nodeName)&&1===$(t).length&&!$(t).is(":hidden")&&(e.preventDefault(),""!==(n=window.getSelection().toString()))){if(""!==(i=$(t).val()))for(;!/(\n{2}|\r{2}|\r\n\r\n)$/.test(i);)i+="\n";r+=(n=n.split(/\r\n|\r|\n/).map(function(e){return"> "+e}).join("\n"))+"\n\n",$(t).focus().val(i+r)}}}}();e.exports=i},function(e,t,n){"use strict";var i=function(){function e(e,t){1===$(t).length&&($(t).is(":hidden")||($(t).focus(),Dotinstall.form.insertAtCaret($(t),"@"+e+" ",!1)))}return{init:function(t){var n,i=document.getElementsByClassName("click-to-mention");for(n=0;n<i.length;n++)i[n].addEventListener("click",function(){e(this.dataset.username,t)})}}}();e.exports=i},function(e,t,n){"use strict";var i=function(){var e,t,i,o,r=n(1),a=!1,s=0,c="";function u(){var e,n;for(n=new RegExp("^"+c);t.firstChild;)t.removeChild(t.firstChild);for(e=0;e<i.length;e++)n.test(i[e])&&t.appendChild(d(i[e]));t.firstChild&&t.firstChild.classList.add("selected")}function d(e){var t=document.createElement("li");return t.textContent=e,t.addEventListener("mouseover",function(){this.classList.add("selected")}),t.addEventListener("mouseout",function(){this.classList.remove("selected")}),t.addEventListener("click",function(){s>0&&l()}),t}function l(){var e,n;for(e=0;e<t.children.length;e++)if(t.children[e].classList.contains("selected")){n=t.children[e].textContent.substr(c.length)+" ",Dotinstall.form.insertAtCaret($(o),n,!1);break}}function f(e){!function(e){a=!Dotinstall.navigator.detect().isFirefox&&e===r.INPUT_JAPANESE}(e.which),0===s||a||e.which!==r.TAB&&e.which!==r.ARROW_UP&&e.which!==r.ARROW_DOWN&&e.which!==r.ENTER||e.preventDefault()}function h(e){switch(e){case r.TAB:case r.ENTER:return l(),m(),!0;case r.ARROW_UP:return function(){var e=document.querySelector(".suggester-list > .selected");e.classList.remove("selected"),e.previousSibling?e.previousSibling.classList.add("selected"):t.lastChild.classList.add("selected")}(),!0;case r.ARROW_DOWN:return function(){var e=document.querySelector(".suggester-list > .selected");e.classList.remove("selected"),e.nextSibling?e.nextSibling.classList.add("selected"):t.firstChild.classList.add("selected")}(),!0}return!1}function p(e){s>0&&h(e.which)||(this.value.substr(this.selectionStart-1,1)!==this.dataset.suggesterTrigger?0!==s&&(this.selectionStart<s?m():(c=this.value.substr(s,this.selectionStart-s),u(),0===t.children.length&&m())):function(){var e;u(),s=o.selectionStart,e=$(o).textareaHelper("caretPos"),t.style.top=e.top+"px",t.style.left=e.left+"px",t.classList.remove("hide")}())}function m(){s=0,c="",t.classList.add("hide")}return{init:function(n){(o=n).parentNode.style.position="relative",(e=document.createElement("div")).classList.add("suggester-container"),function(e){i=e,(t=document.createElement("ul")).classList.add("suggester-list"),t.classList.add("hide"),u()}(o.dataset.suggesterList.split(",")),e.appendChild(t),o.parentNode.insertBefore(e,o.nextSibling),o.addEventListener("keydown",f),o.addEventListener("keyup",p),o.addEventListener("click",p)}}}();e.exports=i},function(e,t,n){"use strict";var i=function(){var e=n(18),t=n(19),i=n(21);return{common:n(22),packagePage:n(23),player:t,question:i,topbar:e}}();e.exports=i},function(e,t,n){"use strict";var i=function(){return{apply:function(e){var t=200,n=80,i=$("#player_min_width").val()-0+36,o=$(window).width(),r=o,a=[],s=!1,c=$(".navbar-inner:first");function u(){$("#global_menu").show().find("li").show(),$("#global_dropdown_menu").find("li.movable").each(function(){if(e){var t=$(this).data("menu-index")-1,n=$("#global_menu").find("li:eq("+t+")");$(this).insertAfter(n)}else $(this).insertBefore($("#global_menu").find("li:last"))}),e||($("#dropdown_of_login_btn").hide(),$("#topbar_login_button > a").removeClass("prepended-to-dropdown"))}function d(t,n){!e&&t.length>0&&($("#dropdown_of_login_btn").show(),$("#topbar_login_button > a").addClass("prepended-to-dropdown")),o<414?$("#global_menu").hide():$("#global_menu").show(),$("#global_menu").find("li.movable").each(function(){-1!==t.indexOf($(this).data("menu-index"))&&(e?$(this).insertAfter("#global_dropdown_menu > li:eq(0)"):$(this).appendTo("#global_dropdown_menu"))}),n?$("#global_menu").find("li.disappear").hide():$("#global_menu").find("li.disappear").show()}function l(e,i){var o=t-(i-e);o<n&&(o=n),$("#q_in_topbar").width(o)}o>1100?(u(),c.width("auto"),$("#q_in_topbar").width(t)):o>676&&o<=1100?(u(),o<726?(a=[3,2,1],l(o,740)):o<840?(a=[3,2],l(o,846)):o<954?(a=[3],l(o,960)):o<1076&&l(o,1082),d(a,s),c.width(o),$("#topbar_search").fadeIn()):(o<622?(s=!0,l(o,648)):l(o,740),d([3,2,1],s),o<i&&(r=i),c.width(r),o<512?$("#topbar_search").hide():$("#topbar_search").fadeIn())}}}();e.exports=i},function(e,t,n){"use strict";var i=function(){var e=n(0),t=n(20);function i(n){n=e(t.lesson_show,n);var i=$(window).width(),o=n.sidebarWidth,r=n.playerMaxWidth,a=n.playerMaxHeight;return i>n.defaultBodyWidth||(i>n.playerShrinkThres&&i<=n.defaultBodyWidth?a=9*(r=i>n.sidebarStartHideWidth?i-o-n.totalHorizontalMargin:n.playerWidthWhileSidebarHiding)/16:((r=i-n.playerHorizontalMargin)<n.playerMinWidth&&(r=n.playerMinWidth),a=9*r/16)),{width:r,height:a}}return{apply:function(e,t){var n=i(e);$(window).width()<954?$("#question_floating_box").removeClass("show"):$("#question_floating_box").addClass("show"),$("#videojs_player, #vimeo_player").width(n.width).height(n.height),$(".unlock-background").height(n.height),t(n.width,n.height)},calcSize:i}}();e.exports=i},function(e,t,n){"use strict";var i={lesson_show:{defaultBodyWidth:1140,playerShrinkThres:676,sidebarStartHideWidth:1012,playerWidthWhileSidebarHiding:640,totalHorizontalMargin:32,playerHorizontalMargin:32,playerMaxWidth:768,playerMaxHeight:432}};e.exports=i},function(e,t,n){"use strict";var i=function(){return{apply:function(e){var t=$(window).width(),n=768,i=696;t<1100&&(t>=710?((n=t-336)<636&&(n=636),i=n-72):((n=t-32)<560&&(n=560),i=n-2)),e(n,i)}}}();e.exports=i},function(e,t,n){"use strict";var i=function(){return{apply:function(e){var t=$(window).width(),n=756;t<1100&&(t>=710?(n=t-336)<636&&(n=636):(n=t-32)<560&&(n=560)),e(n)}}}();e.exports=i},function(e,t,n){"use strict";var i=function(){return{apply:function(e){var t=$(window).width(),n=756;t<1100&&(n=t>=1010?t-344:t-32),e(n)}}}();e.exports=i},function(e,t,n){"use strict";var i=function(){return{get:function(e){var t;return"string"!=typeof document.cookie?null:(t=document.cookie.split("; "),"string"==typeof e?function(e,t){var n,i;for(n=0;n<t.length;n++)if((i=t[n].split("="))[0]===e)return decodeURIComponent(i[1]);return null}(e,t):"[object RegExp]"===toString.call(e)?function(e,t){var n,i,o=[];for(n=0;n<t.length;n++)i=t[n].split("="),e.test(i[0])&&(o[o.length]={name:i[0],value:decodeURIComponent(i[1])});return o}(e,t):null)},remove:function(e,t){var n;(function(e){var t,n=document.cookie.split("; ");for(t=0;t<n.length;t++)if(n[t].split("=")[0]===encodeURIComponent(e))return!0;return!1})(e)&&(n=encodeURIComponent(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT",void 0!==t&&(n+="; path="+t),document.cookie=n)},set:function(e,t,n,i){var o;if("string"!=typeof document.cookie)return null;o=encodeURIComponent(e)+"="+encodeURIComponent(t),void 0!==n&&(o+="; expires="+new Date((new Date).getTime()+1e3*n).toGMTString()),void 0!==i&&(o+="; path="+i),document.cookie=o}}}();e.exports=i},function(e,t,n){"use strict";var i=function(){return{highlight:function(){$("pre").each(function(e,t){hljs.highlightBlock(t)})},removeSpaceChar:function(e){return e.replace(/\s/g,"")}}}();e.exports=i},function(e,t,n){"use strict";var i=function(){n(2);var e,t,i,o,r,a,s,c,u,d,l,f=2,h=!1,p={west:!1,east:!1};function m(){h=!1,c.hide(),$("body").removeClass("disable-select"),l()}function v(){var n=e-t;i-n<p.west?(a.width(p.west),s.width($("body").width()-a.outerWidth())):o+n<p.east?(a.outerWidth($("body").width()-s.outerWidth()),s.width(p.east)):(a.width(i-n),s.width(o+n)),s.offset({top:s.offset().top,left:a.outerWidth()}),_(),d()}function _(){var e=r.hasClass("resize-handle-bold")?0:6;r.offset({top:a.offset().top,left:a.outerWidth()-e}),r.height(function(){var e;e=$(document).height()-$(".dotinstall-normal-topbar").outerHeight()-f,$("#footer").is(":visible")&&(e-=$("#footer").outerHeight());return e}()),r.height()>a.outerHeight()&&r.height(a.outerHeight()-f)}function g(e){return 1*e.css("min-width").replace(/px$/,"")}return{apply:function(n,f,y,b,w,x){r=n,a=f,s=y,u=b||function(){},d=w||function(){},l=x||function(){},p.west=g(a),p.east=g(s),r.on("mousedown",function(t){!function(t){h=!0,e=t.pageX,i=a.width(),o=s.width(),c.show(),$("body").addClass("disable-select"),u()}(t)}).on("mouseup",function(){m()}),_(),(c=$("<div>")).attr("id","resize_mask").addClass("resize-mask").appendTo("body"),c.on("mouseup",function(){m()}),$(document).on("mousemove",function(e){!0===h&&(t=e.pageX,v())}),$(window).on("resize",function(){_()})},doResizeMemo:function(){var e=document.getElementById("memo");null!==e&&($("#memo_body").height($("#memo_form").height()-$("#memo_footer").outerHeight()),e.style.height=$("#memo_body").height()+"px")},isResizable:function(){return void 0!==a&&a.width()>p.west||void 0!==s&&s.width()>p.east},player:n(27),setHandlerOffset:_,update:v,vertical:n(2),watcher:function(e){var t;e=e,this.watchHeightChange=function(n){t=e.clientHeight,function i(){var o;o=e.clientHeight,t!==o&&n(),t=o,e.watchHeightChangeTimer&&clearTimeout(e.watchHeightChangeTimer),e.watchHeightChangeTimer=setTimeout(i,100)}()}}}}();e.exports=i},function(e,t,n){"use strict";var i=function(){return{exec:function(){var e,t,n;return e=document.getElementById("videojs_player"),n=(t=$("#main").width())/16*9,null!==e&&(e.width=t,e.height=n),$("#videojs_player, #vimeo_player").width(t).height(n),$("video").width(t).height(n),$(".unlock-background").height(n),{width:t,height:n}}}}();e.exports=i},function(e,t,n){"use strict";var i={};e.exports=i},function(e,t,n){"use strict";var i=function(){var e,t="(max-width: 686px)";function n(){return window.matchMedia(t).matches}function i(){$("#main").offset({top:$(".navbar-fixed-top").outerHeight()})}return{adjustBreadcrumb:function(e){var t=$("#breadcrumb").find("li"),n=0;$("#breadcrumb").width(e),t.each(function(i){i===t.length-1?$(this).width(e-n-4):n+=$(this).outerWidth()})},adjustCenterCard:function(e){var t;(t=$(".vjs-center-card")).length>0&&t.css("marginTop",(e.height-t.height())/2)},adjustSideTerminal:function(t){var n,i=$(t).width(),o=$(t).height();null!==(n=new RegExp("^https://host-([\\d_]+)-(\\d+)."+e).exec(t.src))&&t.contentWindow.postMessage("resize:w="+i+":h="+o,n[0])},adjustEditorModalForIE11:function(){var e=Dotinstall.navigator.detect();e.isIE&&"11.0"===e.ieVersion&&$("#side_editor_intro_modal").css({left:($("#side_editor_intro_mask").width()-$("#side_editor_intro_modal").width())/2})},adjustMainAreaMinHeight:function(){n()?$("#main").css({minHeight:"auto"}):$("#main").css({minHeight:"none"})},adjustLessonContentsHeight:function(){var e=Math.max($("#overlay_sidebar_contents").height(),$("#main_contents").height()+Dotinstall.sizes.MAIN_TOP_PADDING,$("#sidebar_contents").height());$("#overlay_sidebar").height(e),$("#main").outerHeight(e),$("#sidebar").height(e),function(){if(0===$("#main_overlay").length)return!1;$("#main_overlay").css({top:$("#main").offset().top+"px"}).height($("#main").outerHeight()),n()?$("#main_overlay").width($("#main").outerWidth()):$("#main_overlay").width($("#main").outerWidth()+$("#sidebar").width())}()},adjustSidebarContentsHeight:function(){0!==$("#side_bottom_wrapper").length&&($("#side_bottom_wrapper").outerHeight($(window).height()-$("#sidebar").position().top-$("#side_tab_container").outerHeight()),document.getElementById("side_preview")&&$("#side_preview").height($("#side_preview_container").height()-$("#side_preview_header").outerHeight()),document.getElementById("terminal_wrapper")&&$("#terminal_wrapper").height($("#side_terminal_container").height()-$(".side-terminal-header").outerHeight()))},getMainContentsRatio:function(){return $("#main").outerWidth()/($("#main").outerWidth()+$("#sidebar").outerWidth())},mustBeSingleCol:n,setCloudTerminalDomain:function(t){void 0===e&&(e=t)},resizeMainAndSidebar:function(){var e=$(window).width()<$("body").width()?$("body").width():$(window).width(),t=Math.round(e*Dotinstall.sizes.main.CONTENTS_RATIO),n=e-t;n<Dotinstall.sizes.sidebar.minWidth?t=e-(n=Dotinstall.sizes.sidebar.minWidth):t<Dotinstall.sizes.main.minWidth&&(n=e-(t=Dotinstall.sizes.main.minWidth)),$("#main").outerWidth(t),$("#sidebar").outerWidth(n)},updateMainOffsetTop:i,updateSidebarTop:function(e){$("#sidebar").css({top:$(".navbar-fixed-top").outerHeight()+e})},updateSidebarSettings:function(e){Dotinstall.cookie.set("sidebar_width",$("#sidebar").width(),31536e3,e),Dotinstall.sizes.sidebar.width=$("#sidebar").width()},whenSignupTopBarHidden:function(){i(),n()||($("#sidebar").offset({top:$("#main").offset().top}),$("#resize_handle").offset({top:$("#main").offset().top})),$("#overlay_sidebar").offset({top:$("#main").offset().top}),$("#main_overlay").css({top:$("#main").offset().top+"px"})}}}();e.exports=i},function(e,t,n){"use strict";var i=function(){return{cookie:n(31),done:function(e){$.post("/ui_guide/done.json",{guide_name:e,done:1,one_time_token:$(".one_time_token").val()})},reset:function(e){$.post("/ui_guide/reset.json",{guide_name:e,one_time_token:$(".one_time_token").val()}).done(function(){location.reload()})}}}();e.exports=i},function(e,t,n){"use strict";var i=function(){return{sidebarResize:function(){Dotinstall.cookie.set("hide_guide_sidebar_resize",1,31536e3,"/lessons/")}}}();e.exports=i},function(e,t,n){"use strict";var i=function(){function e(){return $("#overlay_sidebar").hasClass("fold")}function t(){$("#overlay_sidebar").removeClass("fold"),Dotinstall.layout.adjustLessonContentsHeight(),$("#main_overlay").fadeIn(),setTimeout(function(){$(".autoplay").show()},300)}function n(e){$("#overlay_sidebar").find(".accordion").each(function(){e?$("#"+$(this).data("accordion")).slideUp():$("#"+$(this).data("accordion")).hide()})}return{enable:function(){$("#fold_sidebar_box, #main_overlay").on("click",function(){$("#overlay_sidebar").addClass("fold"),$("#main_overlay").fadeOut(),n(!1),$(".autoplay").hide()}),$("#side_package_name_header, .ovs-list-header").on("click",function(n){if("fold_sidebar"===n.target.id)return!1;e()&&t()}),$("#overlay_sidebar.fold").on("click",function(n){e()&&t()}),$("#overlay_sidebar").find(".accordion").each(function(){!function(e){e.on("click",function(){var t="#"+e.data("accordion");$(t).is(":visible")?$(t).slideUp(function(){Dotinstall.layout.adjustLessonContentsHeight()}):(n(!0),$(t).slideDown(function(){Dotinstall.layout.adjustLessonContentsHeight()}))})}($(this))})}}}();e.exports=i},function(e,t,n){"use strict";var i=function(){var e,t,n=1,i=2,o=3,r=4;return{setId:function(t){if(void 0!==e)return!1;e=t},setAnswerTypeId:function(e){if(void 0!==t)return!1;t=e},sendingAnswerButtonClicked:function(){$("#exer_submit").on("click",function(){$(this).prop("disabled",!0),$(".exer-answer-choice").prop("disabled",!0),function(a){var s;s=function(){var e;switch(t){case n:case i:break;case o:e=$(".exer-answer-choice:checked").val();break;case r:e=[],$(".exer-answer-choice:checked").each(function(){e.push($(this).val())})}return e}(),$.post("/exercises/"+e+"/answer.json",{id:e,"answers[]":s,user_id:$("#user_id").val(),one_time_token:$(".one_time_token").val()}).done(function(e){!function(e,t){var n;$("#exer_try_histories").append(e.html.choiced_history).append(e.html.choiced_result),n=$("#exer_try_histories").children().last(),setTimeout(function(){n.fadeIn().find(".typing-bubble").fadeIn()},500),setTimeout(function(){$(".typing-bubble:visible").fadeOut()},2e3),setTimeout(function(){n.find(".exer-form").fadeIn().end().find(".exer-choice-created-at").fadeIn(),!0===e.got_correct?(t.correct(),setTimeout(function(){$("#exer_explanation").append(e.html.explanation)},100)):t.incorrect(),t.always()},2400)}(e,a)}).fail(function(){a.fail(),a.always()})}({correct:function(){$("#exer_answer_form").slideUp()},incorrect:function(){},fail:function(){},always:function(){$("#exer_submit").prop("disabled",!1),$(".exer-answer-choice").prop("disabled",!1)}})})}}}();e.exports=i},function(e,t,n){"use strict";var i=function(){return{buildLocationSearch:function(e){var t,n=[];for(t in e)e.hasOwnProperty(t)&&n.push(t+"="+e[t]);return 0===n.length?"":"?"+n.join("&")},getLocationSearchParams:function(){var e={};return location.search.replace(/^\?/,"").split("&").forEach(function(t){var n;-1!==t.indexOf("=")&&(n=t.split("="),e[n[0]]=n[1])}),e}}}();e.exports=i},function(e,t,n){"use strict";var i={question:n(36)};e.exports=i},function(e,t,n){"use strict";var i=function(){function e(e){e.forEach(function(e){!function(e){if($("#detected_text_area_"+e.id).length>0)return;$("#q_markdown_img_"+e.id).after($('<div class="detected-text-area">').attr("id","detected_text_area_"+e.id).append($('<button class="btn btn-mini open-detected-text">').text("抽出されたテキストを確認").on("click",function(){$(this).siblings("#detected_text_"+e.id).slideDown(200),$(this).hide(),$(this).siblings(".close-detected-text").show()})).append($('<pre id="detected_text_'+e.id+'">').text(e.detected_text).hide()).append($('<button class="btn btn-mini close-detected-text">').text("閉じる").hide().on("click",function(){$(this).siblings("#detected_text_"+e.id).hide(),$(this).hide(),$(this).siblings(".open-detected-text").show()})))}(e)})}return{getDetectedTexts:function(t){$.get("/question/get_detected_texts.json",{id:t}).done(function(t){e(t.detected_texts)})},insertDetectedTexts:e}}();e.exports=i},function(e,t,n){"use strict";var i=function(){return{deleteComment:function(e,t,n,i,o){var r;confirm("コメントを削除しますか？")&&(r="/forum/"+t+"/thread/"+n+"/comment/"+i+"/delete.json",$.post(r,{user_id:e,forum_id:t,thread_id:n,comment_id:i,one_time_token:$(".one_time_token").val()}).done(function(e){o(e)}))},deleteThread:function(e,t,n,i){var o;confirm("スレッドを削除しますか？")&&(o="/forum/"+t+"/thread/"+n+"/delete.json",$.post(o,{user_id:e,forum_id:t,thread_id:n,one_time_token:$(".one_time_token").val()}).done(function(e){i&&i(e)}))}}}();e.exports=i},function(e,t,n){"use strict";var i=function(){return{toggle:function(e,t,n,i){var o=e.data("id"),r=e.data("like-token");e.hasClass("liked")?function(e,t,n,i,o){$.post("/like/off",{target:e,target_id:t,token:n,user_id:i,one_time_token:$(".one_time_token").val()}).done(function(e){o(e)})}(t,o,r,n,i.off):function(e,t,n,i,o){$.post("/like/on",{target:e,target_id:t,token:n,user_id:i,one_time_token:$(".one_time_token").val()}).done(function(e){o(e)})}(t,o,r,n,i.on)}}}();e.exports=i},function(e,t,n){"use strict";var i=n(40),o=n(41),r={token:i,callbacks:o};e.exports=r},function(e,t,n){"use strict";var i=function(){var e=!1;return{setup:function(t,n,i){var o,r=document.getElementById(t);return!e&&null!==r&&(Dotinstall.payment.callbacks.setFormSelector(t),Dotinstall.payment.callbacks.setSelectorsOfComponents(n),$.post("/payment/get_gpay_api_key.json",{prepare_token:$("#prepare_token").val(),one_time_token:$(".one_time_token").val()}).done(function(e){$("#prepare_token").remove(),$("#js_token").val(e.token),o=e.api_key}),void r.addEventListener("submit",function(e){var t={};return e.preventDefault(),function(e){var t;for(t=0;t<e.length;t++)document.getElementById(e[t]).disabled=!0}(n),t.cardno=document.getElementById("card_number").value,t.expire=100*(document.getElementById("card_expire_year").value-0)+(document.getElementById("card_expire_month").value-0),-1!==n.indexOf("card_name")&&(t.holdername=document.getElementById("card_name").value),-1!==n.indexOf("security_code")&&(t.securitycode=document.getElementById("security_code").value),Multipayment.init(o),Multipayment.getToken(t,i),!1}))}}}();e.exports=i},function(e,t,n){"use strict";var i=function(){var e,t;function n(){var t;for(t=0;t<e.length;t++)document.getElementById(e[t]).disabled=!1}function i(e){e-0<110?alert("カード番号に誤りがあります"):e-0<121?alert("有効期限に誤りがあります"):e-0<123?alert("セキュリティコードに誤りがあります"):e-0<133?alert("名義に誤りがあります"):alert("エラーが発生しました。しばらくしてからお試しください。")}return{changeCard:function(e){"000"!==e.resultCode?(i(e.resultCode),n()):function(e){$.post("/premium/change_card",{user_id:$("#user_id").val(),token:e.tokenObject.token,js_token:$("#js_token").val(),one_time_token:$(".one_time_token").val()}).done(function(e){$("#success_change_card").show(),document.getElementById(t).reset(),document.getElementById("js_token").value=e.js_token,n()}).fail(function(e){alert($.parseJSON(e.responseText).error.message),n()})}(e)},purchaseLicense:function(e){if("000"===e.resultCode)return e.tokenObject.isSecurityCodeSet?void function(e){$.post("/business/purchase",{holder_name:$("#card_name").val(),gpay_token:e.tokenObject.token,purchase_token:$("#purchase_token").val(),js_token:$("#js_token").val(),one_time_token:$(".one_time_token").val()}).done(function(e){location.href=e.next_location}).fail(function(e){alert($.parseJSON(e.responseText).error.message),n()})}(e):(alert("セキュリティコードを入力してください"),void n());i(e.resultCode),n()},registerPremium:function(e){"000"!==e.resultCode?(i(e.resultCode),n()):function(e){$.post("/premium/purchase",{user_id:$("#user_id").val(),payment_method_id:2,token:e.tokenObject.token,js_token:$("#js_token").val(),one_time_token:$(".one_time_token").val()}).done(function(e){location.href=e.next_location}).fail(function(e){alert($.parseJSON(e.responseText).error.message),n()})}(e)},setFormSelector:function(e){t=e},setSelectorsOfComponents:function(t){e=t}}}();e.exports=i},function(e,t,n){"use strict";var i=function(){var e,t,i,o=n(43),r=n(44),a=n(45),s=n(46),c=n(47),u=90,d={AUTO:1,HOTKEY_SAVE:2,HOTKEY_RUN:3,PUSH_RUN:4},l={CREATE_FILE:"create-file",WRITE_FILE:"write-file",REMOVE_FILE:"remove-file"},f=[],h=!1,p="",m="";function v(){c.prepare(),c.nowLoading()}function _(e,t){return new Promise(function(n,i){!function i(o){return new Promise(function(n,i){setTimeout(function(){e(f[o],o),n(o+1)},0===o?0:t)}).then(function(e){e>=f.length?n():i(e)})}(0)}).then(function(){})}function g(e){return f[e]}function y(){var e=$("#side_editor_footer").is(":visible")?$("#side_editor_footer").outerHeight():0;return $("#side_tab_container").outerHeight()-$("#side_editor_tabs").outerHeight()-e-10}return{autoSave:o,apply:_,detectTabsScrollable:function(){$("#side_tab_container").width()-Dotinstall.sizes.sidebar.EDITOR_TABS_WIDTH<u?$("#side_editor_tabs_scroll").addClass("scrollable").width($("#side_tab_container").width()-u):$("#side_editor_tabs_scroll").removeClass("scrollable").width(Dotinstall.sizes.sidebar.EDITOR_TABS_WIDTH)},effect:r,fileExplorer:a,get:g,getActiveEditor:function(e){var t;return $(e).each(function(e){$(this).hasClass("active")&&(t=e)}),g(t)},getNumEditors:function(){return f.length},init:function(e){if(void 0!==t)return!1;t=e},isEnabled:function(){return h},isFocused:function(){var e=0,t=!1;for(e=0;e<f.length;e++)f[e].isFocused()&&(t=!0);return t},keyBind:s,previewLoadingOn:v,preview:c,push:function(e){f.push(e)},resizeAll:function(){$("#side_editor_tab_content").height(y()),_(function(e,t){$(e.container).height(y()),e.resize()})},runOnCloud:function(){var t=document.querySelector("iframe.terminal"),n=new RegExp("^https://host-([\\d_]+)-(\\d+)."+e).exec(t.src);null!==n&&t.contentWindow.postMessage("command="+m+"\r\n",n[0])},save:function(e,n){return new Promise(function(i,o){var a=e.container.dataset.filename;t.changes=JSON.stringify(e.changes),e.changes=[],v(),r.saving(e),e.savedValue=e.getValue(),t.files=[{filename:a,source:e.getValue()}],t.save_type=n,$.post("/editor/save.json",t).done(function(t){e.saved=!0,c.load(t.url),c.setUrlCache(a,t.url),r.saved(e,!1),i()})}).then(function(){})},saveSilently:function(e,n){return new Promise(function(i,o){var r=e.container.dataset.filename;e.savedValue=e.getValue(),t.changes=JSON.stringify([]),t.files=[{filename:r,source:e.getValue()}],t.save_type=n,$.post("/editor/save.json",t).done(function(t){e.saved=!0,i()})})},writeToCloud:function(){_(function(e,t){i&&i.send(JSON.stringify({command:l.WRITE_FILE,option:{filename:e.container.dataset.filename,content:e.getValue()},token:p}))},1)},setCloudTerminalDomain:function(t){void 0===e&&(e=t)},setDefaultActiveTab:function(){var e,t=Dotinstall.cookie.get("side_editor_active_tab");for(e=0;e<f.length;e++)if(t===f[e].container.dataset.filename)return $(".side-editor-tab").eq(e+1).find("a").click(),e;return $(".side-editor-tab").eq(1).find("a").click(),1},setIsEnabled:function(e){h=e},SAVE_TYPES:d,connectToCloud:function(e,t,n,o){i=new WebSocket("wss://"+e+"/socket/"),p=t,m=n,i.addEventListener("open",function(){i.send(JSON.stringify({command:l.REMOVE_FILE,option:{files:o},token:p})),_(function(e,t){i.send(JSON.stringify({command:l.WRITE_FILE,option:{filename:e.container.dataset.filename,content:e.getValue()},token:p}))},1)}),i.addEventListener("close",function(){console.log("close")}),i.addEventListener("error",function(){console.log("error")}),function e(){i.readyState===i.OPEN&&i.send(""),setTimeout(e,2e3)}()},updateActiveTabCookie:function(e){Dotinstall.cookie.set("side_editor_active_tab",e.container.dataset.filename,86400)},setupRecording:function(){return new Promise(function(e,n){t.setup_recording=!0,t.changes=JSON.stringify([]),t.save_type=d.AUTO,t.files=[{filename:f[0].container.dataset.filename,source:f[0].getValue()}],$.post("/editor/save.json",t).done(function(t){e()})}).then(function(){console.log("Setup done!")})}}}();e.exports=i},function(e,t,n){"use strict";var i=function(){var e,t=[];function n(){var e;if(0!==t.length){for(e=0;e<t.length;e++)(new Date).getTime()>t[e].executionTime&&i(t.splice(e,1)[0].editor);setTimeout(n,300)}}function i(t){t.savedValue!==t.getValue()&&(e.changes=JSON.stringify(t.changes),t.changes=[],t.savedValue=t.getValue(),e.files.push({filename:t.container.dataset.filename,source:t.getValue()}),e.save_type=Dotinstall.editor.SAVE_TYPES.AUTO,Dotinstall.editor.effect.saving(t),$.post("/editor/save.json",e).done(function(n){e.files=[],t.saved=!0,Dotinstall.editor.effect.saved(t,!0)}))}return{setParams:function(t){void 0===e&&((e={}).lesson_id=t.lesson_id||void 0,e.materials=t.materials||void 0,e.user_id=t.user_id||void 0,e.guest_token=t.guest_token||void 0,e.one_time_token=t.one_time_token||void 0,e.files=[])},pushToQueue:function(e){var i,o={};for(o.editor=e,o.executionTime=(new Date).getTime()+3e3,i=0;i<t.length;i++)if(t[i].editor===e)return t.splice(i,1),void t.push(o);t.push(o),n()}}}();e.exports=i},function(e,t,n){"use strict";var i=function(){var e,t=1200,n=100,i=!1;function o(){$(".side-editor-saving").addClass("saving-hide").removeClass("saving-show")}function r(e){$(e.container).find(".ace_scrollbar-v").is(":visible")?($(".side-editor-saving").addClass("in-scrollable"),$(".side-editor-saved").addClass("in-scrollable")):($(".side-editor-saving").removeClass("in-scrollable"),$(".side-editor-saved").removeClass("in-scrollable"))}return{cancelIfShowing:function(){$(".side-editor-saving").hasClass("saving-show")&&(o(),i=!0)},saving:function(t){e=Date.now(),t&&r(t),$(".side-editor-saving").removeClass("saving-hide").addClass("saving-show")},saved:function a(s,c){c&&Date.now()<e+t?setTimeout(function(){a(s,c)},n):(s&&r(s),o(),i?i=!1:($(".side-editor-saved").removeClass("saved-hide").addClass("saved-show"),setTimeout(function(){$(".side-editor-saved").removeClass("saved-show").addClass("saved-hide")},2e3)))}}}();e.exports=i},function(e,t,n){"use strict";var i=function(){var e,t=[],n=[],i={};function o(t){return e.find("ul[data-dir-name='"+t+"']")}function r(e){return e.substr(0,e.lastIndexOf("/"))}function a(e){return e.substr(e.lastIndexOf("/")+1)}return{init:function(s){(function(t){t.sort(function(e,t){return $(e).find(".se-filename").text()<$(t).find(".se-filename").text()?-1:$(e).find(".se-filename").text()>$(t).find(".se-filename").text()?1:0}),e.empty().append(t)})((e=$(s)).children("li")),e.children("li").each(function(){!function e(n){var i=r(n);""!==i&&(-1===t.indexOf(i)&&t.push(i),e(i))}($(this).find(".se-filename").text().trim())}),t.sort(),t.forEach(function(e){var t=$("<ul></ul>").attr("data-parent-dir-name",e);i[e]=t}),e.children("li").each(function(){var e=r($(this).find(".se-filename").text().trim());""!==e?($(this).find(".se-filename").text(a($(this).find(".se-filename").text())),i[e].append($(this))):n.push($(this))}),t.forEach(function(t){var n,i=t.split("/").length-1,s=$("<ul>").attr("data-dir-name",t).attr("data-depth",i),c=$("<li></li>"),u=$('<span class="se-file-icon"><i class="fa fa-folder"></i></span>'),d=$('<span class="se-filename"></span>').text(a(t));c.attr("data-file-type","directory").append(u).append(d).appendTo(s),1===(n=o(r(t))).length?n.append($("<li>").attr("data-children",1).append(s)):e.append($("<li>").attr("data-children",1).append(s))}),function(){var e;for(e in i)o(i[e].data("parent-dir-name")).append($("<li>").attr("data-children",1).append(i[e]))}(),n.forEach(function(t){e.append(t)})},sizeFit:function(){$("#side_editor_explorer").height($("#side_tab_container").height()-2)}}}();e.exports=i},function(e,t,n){"use strict";var i=function(){var e=!1;return{set:function(t){var n=new(0,ace.require("ace/keyboard/hash_handler").HashHandler);n.addCommand({name:"save",bindKey:{win:"ctrl-s",mac:"cmd-s"},exec:function(e){return Dotinstall.editor.save(e,Dotinstall.editor.SAVE_TYPES.HOTKEY_SAVE),!0},readOnly:!0}),n.addCommand({name:"run",bindKey:{win:"ctrl-r",mac:"cmd-r"},exec:function(t){return Dotinstall.editor.save(t,Dotinstall.editor.SAVE_TYPES.HOTKEY_RUN),e&&Dotinstall.editor.runOnCloud(),!0},readOnly:!0}),n.addCommand({name:"playOrPause",bindKey:{win:"ctrl-enter",mac:"cmd-enter"},exec:function(e){return Dotinstall.videoController.playOrPause(),!0},readOnly:!0}),t.enableDebug&&n.addCommand({name:"resetGuideModal",bindKey:{win:null,mac:"cmd-shift-0"},exec:function(e){return Dotinstall.uiGuide.reset(document.getElementById("ui_guide_name_side_editor_intro").value),!0},readOnly:!0}),t.keyBinding.addKeyboardHandler(n),t.commands.removeCommand("showSettingsMenu")},enableTerminalMode:function(){e=!0}}}();e.exports=i},function(e,t,n){"use strict";var i=function(){var e,t,n,i,o=!1,r=!1,a={};return{init:function(r,a){e=r,t=a,n=document.createElement("iframe"),function(){var e;(i=document.createElement("div")).classList.add("side-preview-loading"),(e=document.createElement("i")).classList.add("fa"),e.classList.add("fa-spinner"),e.classList.add("fa-pulse"),e.classList.add("fa-3x"),i.appendChild(e)}(),e.classList.add("active"),o=!0},isReady:r,nowLoading:function(){o&&(i.classList.add("show"),e.classList.add("loading"))},prepare:function(){if(!0!==r&&o){for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(n),e.appendChild(i),r=!0}},run:function(e){o&&(n.src=a[e])},load:function(r){o&&(i.classList.remove("show"),e.classList.remove("loading"),n.src=r,t.href=r,t.target="dotinstall_editor_preview")},setUrlCache:function(e,t){o&&(a[e]=t)}}}();e.exports=i},function(e,t,n){"use strict";var i=function(){var e,t,n,i,o,r,a=!1;function s(){var r=this.dataset.auth_token,a=this.dataset.run_command;this.contentWindow.postMessage("auth_token="+this.dataset.auth_token,this.src),delete this.dataset.auth_token,delete this.dataset.run_command,this.removeEventListener("load",s),this.src=this.src.replace(/bootstrap\.html$/,"?"+t),this.addEventListener("load",function(){$(this).height($(this.parentNode).height()),Dotinstall.layout.adjustSideTerminal(this),Dotinstall.editor.getNumEditors()>0&&Dotinstall.editor.connectToCloud(this.dataset.domain,r,a,n),$.post("/container/prepare_verify.json",{auth_token:r,one_time_token:i}).done(function(t){!function(t){var n=document.querySelector("iframe.terminal"),i=new RegExp("^https://host-([\\d_]+)-(\\d+)."+e).exec(n.src);if(null===i)return;n.contentWindow.postMessage("verify="+t,i[0])}(t.one_time_token),window.addEventListener("message",function(e){if(e.origin!==o)return!1;"Connection closed"===e.data&&document.getElementsByClassName("side-editor-ws-closed")[0].classList.add("show")},!1)})},!1)}return{loadContainer:function(t){var n="/container/load?token="+t;window.addEventListener("message",function(e){if(e.origin!==o)return!1;"Connection opened"===e.data&&document.getElementById("terminal_now_connecting").parentNode.removeChild(document.getElementById("terminal_now_connecting")),"no_cookie"===e.data&&(document.getElementById("terminal_now_connecting").classList.add("hide"),document.getElementById("terminal_connecting_error_no_cookie").classList.remove("hide"),document.getElementById("q_float_btn").classList.add("hide"))},!1),a&&(n+="&recording_ename="+r),$.get(n).done(function(t){var n,i,r,a;for(i=0;i<t.containers.length;i++)r=t.containers[i],0===i&&(o="https://"+r.server.host+"."+e),a=o+"/bootstrap.html",(n=document.createElement("iframe")).classList.add("terminal"),n.dataset.port_number=r.port_number,n.dataset.auth_token=r.auth_token,n.dataset.domain=r.server.host+"."+e,n.dataset.run_command=r.run_command,n.src=a,n.addEventListener("load",s,!1),document.getElementById("terminal_wrapper").appendChild(n)}).fail(function(){})},setAllFiles:function(e){void 0===n&&(n=e)},setProps:function(n){void 0!==n.domain&&function(t){void 0===e&&(e=t)}(n.domain),void 0!==n.env&&function(e){void 0===t&&(t=e)}(n.env),void 0!==n.one_time_token&&function(e){void 0===i&&(i=e)}(n.one_time_token)},setIsRecordingDummy:function(e){!0!==e&&!1!==e||(a=e)},setRecordingEname:function(e){void 0===r&&(r=e)}}}();e.exports=i},function(e,t,n){"use strict";var i=function(){var e=n(50);return{alert:n(52),settings:e}}();e.exports=i},function(e,t,n){"use strict";var i={autoplay:n(51)};e.exports=i},function(e,t,n){"use strict";var i=function(){return{enable:function(e){$(e).on("click",function(){$("#autoplay").is(":checked")?function(){if(void 0===HMHM.movie.videojs)return!1;void 0!==HMHM.movie.videojs.player_&&HMHM.movie.videojs.player_.on("ended",function(){HMHM.movie.videojs.on.ended()})}():function(){if(void 0===HMHM.movie.videojs)return!1;void 0!==HMHM.movie.videojs.player_&&HMHM.movie.videojs.player_.off("ended"),HMHM.movie.autoplay.removeAutoplayCookie()}(),$.post("/user/update_autoplay.json",{user_id:$("#user_id").val(),autoplay:$("#autoplay").is(":checked")?1:0,one_time_token:$(".one_time_token").val()})})}}}();e.exports=i},function(e,t,n){"use strict";var i=function(){return{closeVolumeAlert:function(e){$("#volume_alert_mask").hide(),Dotinstall.cookie.set("volume_alert_close",e,void 0,"/lessons/")}}}();e.exports=i},function(e,t,n){"use strict";var i=function(){var e=".tabs",t=".tab-body";function i(n){var i="tab_body_"+n.data("tab-id");n.addClass("active").siblings("li").removeClass("active"),$(t).each(function(){$(this).attr("id")===i&&($(this).show(),$(this).siblings().hide())}),!0===n.parent(e).data("tab-save")&&HMHM.cookie.set(n.parent(e).data("tabs-id"),n.data("tab-id"),2592e6,"/lessons/")}return{enable:function(){$(t).hide(),$(t+".active").show(),$(e+" > li").on("click",function(){i($(this))}),$(e).each(function(){!0===$(this).data("tab-save")&&function(t){var n,o;n=function(e){var t=[],n="";return e.children("li").each(function(){t.push($(this).data("tab-id"))}),n="tabs_state_"+t.join("_"),e.data("tabs-id",n),n}(t),null!==(o=HMHM.cookie.get(n))&&$(e+" > li").each(function(){$(this).data("tab-id")===o&&i($(this))})}($(this))})},scroll:n(54)}}();e.exports=i},function(e,t,n){"use strict";var i=function(){var e,t,n,i,o=100,r=300,a=0;function s(){return a>o?o:a}function c(){var e=i.width()-$(n).width()-a;return e>o?o:e}return{enable:function(o,u){e=document.getElementById(o),t=document.getElementById(u),n=function e(t){return t.parentNode?t.parentNode.classList.contains("tabs-scroll")?t.parentNode:e(t.parentNode):null}(e),i=$("#"+e.dataset.scrollTab),e.addEventListener("click",function(e){var t;e.preventDefault(),t=s(),i.animate({marginLeft:"+="+t+"px"},r),a-=t,n.classList.remove("scroll-end"),0===s()&&n.classList.remove("scroll-start")}),t.addEventListener("click",function(e){var t;e.preventDefault(),t=c(),i.animate({marginLeft:"-="+t+"px"},r),a+=t,n.classList.add("scroll-start"),0===c()&&n.classList.add("scroll-end")})}}}();e.exports=i},function(e,t,n){"use strict";var i=function(){var e=!1;return{log:function(t){e||(e=!0,$.post("/guest/log",t))}}}();e.exports=i},function(e,t,n){"use strict";var i=function(){return{run:function(e,t,n){e.which===t&&n&&n(e)}}}();e.exports=i},function(e,t,n){"use strict";var i={package:n(58)};e.exports=i},function(e,t,n){"use strict";var i=function(){return{update:function(e){var t,n=document.getElementsByClassName("flat-progressBar_inner"),i=document.getElementsByClassName("flat-progressBar_text");for(t=0;t<n.length;t++)"1"===n[t].dataset.workingWithCompleteButton&&(n[t].style.width=e+"%",i[t].textContent=e+"%",100===e?i[t].classList.add("completed"):i[t].classList.remove("completed"))}}}();e.exports=i}]);